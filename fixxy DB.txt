-- DROP SCHEMA dbo;

CREATE SCHEMA dbo;

-- Drop table

-- DROP TABLE [fixxy-rpm].dbo.TBL_SKILL GO

CREATE TABLE [fixxy-rpm].dbo.TBL_SKILL (
	ID bigint IDENTITY(1,1) NOT NULL,
	NAME nvarchar(50) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
	DESCRIPTION nvarchar(255) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
	CONSTRAINT PK_SKILL PRIMARY KEY (ID)
) GO

-- Drop table

-- DROP TABLE [fixxy-rpm].dbo.TBL_USER GO

CREATE TABLE [fixxy-rpm].dbo.TBL_USER (
	ID bigint IDENTITY(1,1) NOT NULL,
	USERNAME nvarchar(50) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
	PASSWORD nvarchar(255) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
	[ROLE] nvarchar(50) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
	EMAIL nvarchar(50) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
	PHONE nvarchar(15) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
	IS_DELETE bit NOT NULL,
	DEVICE_ID nvarchar(250) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
	FULLNAME nvarchar(255) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
	ADDRESS nvarchar(MAX) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
	CONSTRAINT PK_TBL_USER PRIMARY KEY (ID)
) GO

-- Drop table

-- DROP TABLE [fixxy-rpm].dbo.TBL_WORKER_SKILL GO

CREATE TABLE [fixxy-rpm].dbo.TBL_WORKER_SKILL (
	ID bigint IDENTITY(1,1) NOT NULL,
	WORKER_ID bigint NOT NULL,
	SKILL_ID bigint NOT NULL,
	CONSTRAINT PK_TBL_USER_SKILL PRIMARY KEY (ID),
	CONSTRAINT [FK_USER_SKILL-SKILL] FOREIGN KEY (SKILL_ID) REFERENCES [fixxy-rpm].dbo.TBL_SKILL(ID),
	CONSTRAINT [FK_WORKER_SKILL-WORKER] FOREIGN KEY (WORKER_ID) REFERENCES [fixxy-rpm].dbo.TBL_USER(ID)
) GO

-- Drop table

-- DROP TABLE [fixxy-rpm].dbo.TBL_WORK_DESCRIPTION GO

CREATE TABLE [fixxy-rpm].dbo.TBL_WORK_DESCRIPTION (
	ID bigint IDENTITY(1,1) NOT NULL,
	DESCRIPTION nvarchar(1000) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
	CUSTOMER_ID bigint NOT NULL,
	SKILL_ID bigint NULL,
	DATE_CREATED date NULL,
	CONSTRAINT PK_WORK_DESCRIPTION PRIMARY KEY (ID),
	CONSTRAINT [FK_WORK_DESCRIPTION-CUSTOMER] FOREIGN KEY (CUSTOMER_ID) REFERENCES [fixxy-rpm].dbo.TBL_USER(ID),
	CONSTRAINT [FK_WORK_DESCRIPTION-SKILL] FOREIGN KEY (SKILL_ID) REFERENCES [fixxy-rpm].dbo.TBL_SKILL(ID)
) GO

-- Drop table

-- DROP TABLE [fixxy-rpm].dbo.TBL_ORDER GO

CREATE TABLE [fixxy-rpm].dbo.TBL_ORDER (
	ID bigint IDENTITY(1,1) NOT NULL,
	WORKER_ID bigint NULL,
	WORK_DESCRIPTION_ID bigint NULL,
	TOTAL_CREDIT decimal(18,3) NULL,
	ADDRESS nvarchar(MAX) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
	STATUS nvarchar(20) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
	RATE int NULL,
	FEEDBACK nvarchar(500) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
	NAME_DEVICE nvarchar(100) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
	LATITUDE float NULL,
	LONGITUDE float NULL,
	DETAIL_ADDRESS nvarchar(MAX) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
	CONSTRAINT PK_ORDER PRIMARY KEY (ID),
	CONSTRAINT [FK_ORDER-WORKER] FOREIGN KEY (WORKER_ID) REFERENCES [fixxy-rpm].dbo.TBL_USER(ID),
	CONSTRAINT [FK_ORDER-WORK_DESCRIPTION] FOREIGN KEY (WORK_DESCRIPTION_ID) REFERENCES [fixxy-rpm].dbo.TBL_WORK_DESCRIPTION(ID)
) GO

-- Drop table

-- DROP TABLE [fixxy-rpm].dbo.TBL_ORDER_CANCEL_TRACKING GO

CREATE TABLE [fixxy-rpm].dbo.TBL_ORDER_CANCEL_TRACKING (
	ID bigint IDENTITY(1,1) NOT NULL,
	USER_ID bigint NOT NULL,
	ORDER_ID bigint NOT NULL,
	DATE_CANCELLED date NOT NULL,
	CONSTRAINT PK_ORDER_CANCEL_TRACKING PRIMARY KEY (ID),
	CONSTRAINT [FK_TRACKING-ORDER] FOREIGN KEY (ORDER_ID) REFERENCES [fixxy-rpm].dbo.TBL_ORDER(ID),
	CONSTRAINT [FK_TRACKING-USER] FOREIGN KEY (USER_ID) REFERENCES [fixxy-rpm].dbo.TBL_USER(ID)
) GO;
